<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>xilpuf: XilPuf APIs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="HTML_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="xlogo_bg.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">xilpuf
   </div>
   <div id="projectbrief">Xilinx Vitis Drivers API Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="globals.html"><span>APIs</span></a></li>
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__xpuf__apis.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">XilPuf APIs</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae2607f20a8f0199c8f0eb53d0dfc9f0a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xpuf__apis.html#gae2607f20a8f0199c8f0eb53d0dfc9f0a">XPuf_Registration</a> (XPuf_Data *PufData)</td></tr>
<tr class="memdesc:gae2607f20a8f0199c8f0eb53d0dfc9f0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This functions performs PUF registration.  <a href="#gae2607f20a8f0199c8f0eb53d0dfc9f0a">More...</a><br/></td></tr>
<tr class="separator:gae2607f20a8f0199c8f0eb53d0dfc9f0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f60c4624b046d3f5c74d8cb01f8f90d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xpuf__apis.html#ga2f60c4624b046d3f5c74d8cb01f8f90d">XPuf_Regeneration</a> (XPuf_Data *PufData)</td></tr>
<tr class="memdesc:ga2f60c4624b046d3f5c74d8cb01f8f90d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function regenerate PUF data using helper data stored in eFUSE or external memory.  <a href="#ga2f60c4624b046d3f5c74d8cb01f8f90d">More...</a><br/></td></tr>
<tr class="separator:ga2f60c4624b046d3f5c74d8cb01f8f90d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03c85715b04394967ebb2274f09f510a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xpuf__apis.html#ga03c85715b04394967ebb2274f09f510a">XPuf_GenerateFuseFormat</a> (XPuf_Data *PufData)</td></tr>
<tr class="memdesc:ga03c85715b04394967ebb2274f09f510a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts the PUF Syndrome data to eFUSE writing format.  <a href="#ga03c85715b04394967ebb2274f09f510a">More...</a><br/></td></tr>
<tr class="separator:ga03c85715b04394967ebb2274f09f510a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga651bbcfe2834f71fa821e1cb113a723f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xpuf__apis.html#ga651bbcfe2834f71fa821e1cb113a723f">XPuf_ClearPufID</a> (void)</td></tr>
<tr class="memdesc:ga651bbcfe2834f71fa821e1cb113a723f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function clears PUF ID.  <a href="#ga651bbcfe2834f71fa821e1cb113a723f">More...</a><br/></td></tr>
<tr class="separator:ga651bbcfe2834f71fa821e1cb113a723f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga651bbcfe2834f71fa821e1cb113a723f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XPuf_ClearPufID </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function clears PUF ID. </p>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XST_SUCCESS - PUF ID is successfully cleared</li>
<li>XPUF_ERROR_PUF_ID_ZERO_TIMEOUT - Timeout occurred for clearing PUF ID</li>
<li>XST_FAILURE - Unexpected event </li>
</ul>
</dd></dl>

<p>References <a class="el" href="xpuf__hw_8h.html#aa434bf16a400f338385e4b9df797a1da">XPUF_CLEAR_ID</a>, <a class="el" href="xpuf__hw_8h.html#a7c9cea801d83c73aac586671710c492b">XPUF_PMC_GLOBAL_BASEADDR</a>, and <a class="el" href="xpuf_8c.html#a8eda4f7307742eae0ea34465e43d2555">XPUF_STATUS_WAIT_TIMEOUT</a>.</p>

</div>
</div>
<a class="anchor" id="ga03c85715b04394967ebb2274f09f510a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XPuf_GenerateFuseFormat </td>
          <td>(</td>
          <td class="paramtype">XPuf_Data *&#160;</td>
          <td class="paramname"><em>PufData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts the PUF Syndrome data to eFUSE writing format. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">PufData</td><td>- Pointer to XPuf_Data structure which includes options to configure PUF</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XST_SUCCESS - Syndrome data is successfully trimmed</li>
<li>XPUF_ERROR_INVALID_PARAM - PufData instance pointer is NULL<ul>
<li>XST_FAILURE - Unexpected event</li>
</ul>
</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Formatted data will be available at PufData-&gt;EfuseSynData </dd></dl>
<h2>Trimming logic for PUF Syndrome Data: </h2>
<p>Space allocated in eFUSE for syndrome data = 4060bits eFUSE02 - 2032bits eFUSE03 - 2028bits</p>
<p>PUF Helper data generated for 4K Mode through registration is 140 Words = 140*32 = 4480 bits. Remove lower 12 bits of every fourth word of syndrome data.</p>
<p>After removing these bits remaining syndrome data will be exactly 4060bits which will fit into eFUSE.</p>
<pre class="fragment"> Illustration:

 Input
 -----
</pre><p> 454D025B CDCB36FC EE1FE4C5 3FE53F74 &ndash;&gt; F74 has to removed &amp; 3A0AE7F8 next word upper 12 bits have to be shifted here 2373F03A C83188AF 3A5EB687&ndash;&gt; 687 has to be removed B83E4A1D D53B5C50 FA8B33D9 07EEFF43 &ndash;&gt; F43 has to be removed CD01973F ........ ........ ........</p>

</div>
</div>
<a class="anchor" id="ga2f60c4624b046d3f5c74d8cb01f8f90d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XPuf_Regeneration </td>
          <td>(</td>
          <td class="paramtype">XPuf_Data *&#160;</td>
          <td class="paramname"><em>PufData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function regenerate PUF data using helper data stored in eFUSE or external memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">PufData</td><td>- Pointer to XPuf_Data structure which includes options to configure PUF</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XST_SUCCESS - PUF Regeneration successful</li>
<li>XPUF_ERROR_INVALID_PARAM - PufData is NULL</li>
<li>XPUF_ERROR_INVALID_REGENERATION_TYPE - Selection of invalid regeneration type</li>
<li>XPUF_ERROR_CHASH_NOT_PROGRAMMED - Helper data not provided</li>
<li>XPUF_ERROR_PUF_STATUS_DONE_TIMEOUT - Timeout occurred while waiting for PUF done bit</li>
<li>XPUF_ERROR_PUF_DONE_KEY_ID_NT_RDY - Key ready bit and ID ready bit is not set</li>
<li>XPUF_ERROR_PUF_DONE_ID_NT_RDY - Id ready bit is not set</li>
<li>XPUF_IRO_FREQ_WRITE_MISMATCH - Mismatch in writing or reading IRO frequency at the time of PUF regeneration</li>
<li>XST_FAILURE - Unexpected event</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>PUF is only supported when using a nominal VCC_PMC of 0.70V or IRO frequency of 320 MHz </dd></dl>
<p>When registering the PUF, the PMC internal ring oscillator (IRO) frequency must be set to 320 MHz. When the Versal ACAP boots, it always uses the default frequency of 320 MHz for -LP devices and 400 MHZ for -MP,-HP devices. If the IRO frequency at boot does not match the IRO frequency during registration, there is a potential of reduced stability which can impact the PUFs ability to regenerate properly.</p>

<p>References <a class="el" href="xpuf__hw_8h.html#a8de92777769beec92be582cbeea6f374">XPUF_CFG1_INIT_VAL_4K</a>, <a class="el" href="xpuf__hw_8h.html#a7c9cea801d83c73aac586671710c492b">XPUF_PMC_GLOBAL_BASEADDR</a>, <a class="el" href="xpuf__hw_8h.html#aab39c63597c59d4264e55fa34baa2f37">XPUF_PMC_GLOBAL_GLOBAL_CNTRL_OFFSET</a>, and <a class="el" href="xpuf__hw_8h.html#a2ac90f23a92b5051042f6656df5f30a1">XPUF_SLVERR_ENABLE_MASK</a>.</p>

</div>
</div>
<a class="anchor" id="gae2607f20a8f0199c8f0eb53d0dfc9f0a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XPuf_Registration </td>
          <td>(</td>
          <td class="paramtype">XPuf_Data *&#160;</td>
          <td class="paramname"><em>PufData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This functions performs PUF registration. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">PufData</td><td>- Pointer to XPuf_Data structure which includes options to configure PUF</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XST_SUCCESS - PUF registration successful</li>
<li>XPUF_ERROR_INVALID_PARAM - PufData is NULL</li>
<li>XPUF_ERROR_INVALID_SYNDROME_MODE - Incorrect Registration mode</li>
<li>XPUF_ERROR_SYNDROME_WORD_WAIT_TIMEOUT - Timeout occurred while waiting for PUF Syndrome data</li>
<li>XPUF_ERROR_PUF_DONE_WAIT_TIMEOUT - Timeout occurred while waiting for PUF done bit at the time of PUF registration</li>
<li>XPUF_IRO_FREQ_WRITE_MISMATCH - Mismatch in writing or reading IRO frequency</li>
<li>XST_FAILURE - Unexpected event</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Helper data will be available in PufData-&gt;SyndromeData, PufData-&gt;Chash, PufData-&gt;Aux PUF is only supported when using a nominal VCC_PMC of 0.70V or IRO frequency of 320 MHz </dd></dl>
<p>When registering the PUF, the PMC internal ring oscillator (IRO) frequency must be set to 320 MHz. When the Versal ACAP boots, it always uses the default frequency of 320 MHz for -LP devices and 400 MHZ for -MP,-HP devices. If the IRO frequency at boot does not match the IRO frequency during registration, there is a potential of reduced stability which can impact the PUFs ability to regenerate properly.</p>
<p>Update shutter value for PUF registration</p>
<p>Trigger PUF registration</p>
<p>PUF helper data includes Syndrome data, CHash and Auxillary data. Capturing Syndrome data word by word</p>
<p>Once complete Syndrome data is captured and PUF operation is done, read CHash, Auxillary data and PUF ID</p>

<p>References <a class="el" href="xpuf__hw_8h.html#a8de92777769beec92be582cbeea6f374">XPUF_CFG1_INIT_VAL_4K</a>, <a class="el" href="xpuf__hw_8h.html#a6ecccb5394199541d2b158e7390b13c4">XPUF_CMD_REGISTRATION</a>, and <a class="el" href="xpuf__hw_8h.html#a7c9cea801d83c73aac586671710c492b">XPUF_PMC_GLOBAL_BASEADDR</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright &copy; 2015 Xilinx Inc. All rights reserved.</li>
  </ul>
</div>
</body>
</html>
